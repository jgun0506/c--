#include <stdio.h>

char *mystrtok1(char *str, char delim) {
	static char *psave = 0;
	
	if(str != NULL){
		psave=str;	
	}else if(psave==NULL){
		return NULL;
	}
	
	char* tokenstart=psave;
	
	while(*psave != '\0' && *psave!=delim){
		psave++;
	}
	
	if(*psave == delim){
		*psave='\0';
		psave++;
	}else{
		psave=NULL;
	}
	
	
	return tokenstart;
}

int main(void) {
	char pstr[256] = { ",123,hello,34 56, Good.,Bye"};
	char *ptoken;
	char delim = ',';
	int test = 0;

	ptoken = mystrtok1(pstr, delim);
	
	while (ptoken) {
		printf("%s\n",ptoken);
		ptoken = mystrtok1(0, delim);		
	}
		
	return 0;
}
